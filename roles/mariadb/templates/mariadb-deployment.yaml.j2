--- 
apiVersion: apps/v1
kind: Deployment
metadata: 
  name: "{{meta.name}}"
  namespace: "{{meta.namespace}}"
spec: 
  replicas: {{size}}
  selector: 
    matchLabels: 
      app: mariadb
  template: 
    metadata: 
      labels: 
        app: mariadb
    spec: 
      containers: 
        - env: 
            - name: MYSQL_ROOT_PASSWORD
              value: "{{mysql_root_password}}"
            - name: MYSQL_DATABASE
              value: "{{mysql_database}}"
            - name: MYSQL_USER
              value: "{{mysql_user}}"
            - name: MYSQL_PASSWORD
              value: "{{mysql_user_password}}"
          image: "{{db_image}}"
          name: mariadb-container
          ports: 
            - containerPort: 3306
          volumeMounts:
          - mountPath: /var/lib/mysql
            name: mariadb-data
      volumes:
        - name: mariadb-data
          persistentVolumeClaim:
            claimName: mariadb-persistent-volume-claim-{{meta.namespace}}